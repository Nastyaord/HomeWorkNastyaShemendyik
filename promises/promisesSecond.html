<!doctype html>
<html lang="en">
<head>
    <link rel="stylesheet" href="promisesSecond.css">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Document</title>
</head>
<body>
<div class="wrapPreloder">


    <div id="preloader">

    </div>

    <span id="counterPreloader">100</span>
</div>
<div class="wrapWithBlocks">


    <div class="container" id="firstContainer">
        <img src="promisesSecond1.jpg" alt="">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean varius erat quis lacinia accumsan. Nam ante quam, convallis sodales ante nec, blandit vulputate risus. Donec diam dolor, ultrices nec nisl at, accumsan iaculis mauris. Vestibulum condimentum erat vel ipsum dapibus consequat. Morbi quis libero nec ante porttitor luctus nec sit amet metus. Nunc in dictum erat. Donec nec ullamcorper arcu. Nullam a turpis et arcu cursus ornare. Vestibulum at tortor ante. Suspendisse pulvinar erat enim. Quisque scelerisque magna vel risus fringilla porttitor. Morbi nulla risus, porttitor vel blandit sed, pretium in quam.</p>

    </div>
    <div class="container" id="secondContainer">
        <img src="promisesSecond1g.jpg" alt="">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean varius erat quis lacinia accumsan. Nam ante quam, convallis sodales ante nec, blandit vulputate risus. Donec diam dolor, ultrices nec nisl at, accumsan iaculis mauris. Vestibulum condimentum erat vel ipsum dapibus consequat. Morbi quis libero nec ante porttitor luctus nec sit amet metus. Nunc in dictum erat. Donec nec ullamcorper arcu. Nullam a turpis et arcu cursus ornare. Vestibulum at tortor ante. Suspendisse pulvinar erat enim. Quisque scelerisque magna vel risus fringilla porttitor. Morbi nulla risus, porttitor vel blandit sed, pretium in quam.</p>
    </div>
    <div class="container" id="thirdContainer">
        <img src="promisesSecond3.jpg" alt="">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean varius erat quis lacinia accumsan. Nam ante quam, convallis sodales ante nec, blandit vulputate risus. Donec diam dolor, ultrices nec nisl at, accumsan iaculis mauris. Vestibulum condimentum erat vel ipsum dapibus consequat. Morbi quis libero nec ante porttitor luctus nec sit amet metus. Nunc in dictum erat. Donec nec ullamcorper arcu. Nullam a turpis et arcu cursus ornare. Vestibulum at tortor ante. Suspendisse pulvinar erat enim. Quisque scelerisque magna vel risus fringilla porttitor. Morbi nulla risus, porttitor vel blandit sed, pretium in quam.</p>
    </div>
</div>


<script>
    let counter = 100;
    let pendingPreloader = new Promise(
        (resolve, reject) => {
            let preloader = document.getElementById("preloader");
            preloader.addEventListener("mouseover", function () {
                    if(counter != 100) {
                        return false;
                    }
                    let counterPreloader = document.getElementById("counterPreloader");
                    let preloader = document.getElementById("preloader");
                    let timerPreloder =  setInterval(()=>{
                        counterPreloader.innerText = --counter;
                        if (0 == counter) {
                            clearInterval(timerPreloder);
                        }
                    }, 0,5);
                    preloader.addEventListener("transitionend", function () {
                        resolve();
                        reject();
                    });
                }
            );
        });

    function clearFirstContainer(){
        firstText = firstContainer.getElementsByTagName('*');
            firstText[0].style.display = "none";
        setTimeout( function () {
            firstText[1].style.display = "none";
        }, 1000);
        setTimeout( function () {
            firstContainer.style.display = "none";
        }, 2000);
    };

    function clearSecondContainer(){
        secondText = secondContainer.getElementsByTagName('*');
        setTimeout( function () {
            secondText[0].style.display = "none";
        }, 3000);
        setTimeout( function () {
            secondText[1].style.display = "none";
        }, 4000);
        setTimeout( function () {
           secondContainer.style.display = "none";
        }, 5000)
    };

    function clearThirdContainer(){
        thirdText = thirdContainer.getElementsByTagName('*');
        setTimeout( function () {
            thirdText[0].style.display = "none";
        }, 6000);
        setTimeout( function () {
            thirdText[1].style.display = "none";
        }, 7000);
        setTimeout( function () {
            thirdContainer.style.display = "none";
        }, 8000)
    };


    pendingPreloader.then(clearFirstContainer)
                    .then(clearSecondContainer)
                    .then(clearThirdContainer);


</script>

</body>
</html>